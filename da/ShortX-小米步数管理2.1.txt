{
  "actions": [{
    "@type": "type.googleapis.com/NoAction",
    "icon": "run-fill",
    "customContextDataKey": {
    },
    "note": "设置指令图标",
    "id": "A-b93940f3-5789-4222-9487-a531b42d12d5"
  }, {
    "@type": "type.googleapis.com/IfThenElse",
    "If": [{
      "@type": "type.googleapis.com/EvaluateGlobalVar",
      "op": "IsNotExists",
      "varName": "stepss",
      "payload": {
      },
      "customContextDataKey": {
      },
      "id": "C-988548b7-af44-4c12-bf25-edd121b0a846"
    }],
    "IfActions": [{
      "@type": "type.googleapis.com/CreateGlobalVar",
      "globalVar": {
        "name": "stepss",
        "type": {
          "@type": "type.googleapis.com/Int64Var"
        },
        "note": "步数"
      },
      "customContextDataKey": {
      },
      "id": "A-1fa520de-a67a-4cb1-9518-c8a62f814b18"
    }],
    "customContextDataKey": {
    },
    "id": "A-d9a5d865-53a7-481c-b2ad-ac55424c0b2b"
  }, {
    "@type": "type.googleapis.com/ShellCommand",
    "command": "# 修改自小尘\n\nfunction show_steps(){\ntoday\u003d\"$(date -d \"$(date +%Y-%m-%d)\" +%s)000\"\nlocal number\u003d0\nlocal count\u003d\"$(content query --uri content://com.miui.providers.steps/item --projection _steps --where \"_end_time\u003e\"$today\"\" 2\u003e/dev/null | cut -d\u0027\u003d\u0027 -f2 )\"\ntest \"$(echo \"$count\" | sed \u0027/^#/d;/^[[:space:]]*$/d\u0027 | grep -w \u0027^[[:digit:]]*$\u0027)\" \u003d \"\" \u0026\u0026 count\u003d\"0\"\nfor i in $count\ndo\n\t((number+\u003di))\ndone\necho \"$number\"\n}\n\nshow_steps\u003d$(show_steps)\n\necho $show_steps",
    "customContextDataKey": {
    },
    "id": "A-2e172750-0207-4549-b97e-f13a4309857b"
  }, {
    "@type": "type.googleapis.com/ShowMenuDialog",
    "items": [{
      "title": "修改步数",
      "clickActions": [{
        "@type": "type.googleapis.com/ShowMenuDialog",
        "items": [{
          "title": "增加步数",
          "clickActions": [{
            "@type": "type.googleapis.com/ShowTextFieldDialog",
            "title": "增加步数",
            "cancelable": true,
            "textFields": [{
            }],
            "customContextDataKey": {
            },
            "actionOnError": "Break",
            "id": "A-ce9c36d8-f52d-4f32-82fb-1828c449158c"
          }, {
            "@type": "type.googleapis.com/WriteGlobalVar",
            "varName": "stepss",
            "valueAsString": "{textFieldInput1}",
            "customContextDataKey": {
            },
            "id": "A-1766a32b-b951-464d-a4ef-7a98b951df69"
          }]
        }, {
          "title": "减少步数",
          "clickActions": [{
            "@type": "type.googleapis.com/ShowTextFieldDialog",
            "title": "减少步数",
            "cancelable": true,
            "textFields": [{
            }],
            "customContextDataKey": {
            },
            "actionOnError": "Break",
            "id": "A-ce9c36d8-f52d-4f32-82fb-1828c449158c"
          }, {
            "@type": "type.googleapis.com/WriteGlobalVar",
            "varName": "stepss",
            "valueAsString": "-{textFieldInput1}",
            "customContextDataKey": {
            },
            "id": "A-1766a32b-b951-464d-a4ef-7a98b951df69"
          }]
        }, {
          "title": "取消",
          "clickActions": [{
            "@type": "type.googleapis.com/CreateGlobalVar",
            "globalVar": {
              "name": "abbbbbbbbbb",
              "type": {
                "@type": "type.googleapis.com/StringVar"
              }
            },
            "customContextDataKey": {
            },
            "id": "A-9ed7ef08-6568-4df0-bc93-a7a0fbac34c8"
          }]
        }],
        "customContextDataKey": {
        },
        "id": "A-b457fd70-1efb-4c15-90dd-0247d027aa4f"
      }]
    }, {
      "title": "指定步数",
      "clickActions": [{
        "@type": "type.googleapis.com/ShowTextFieldDialog",
        "title": "输入要指定的步数",
        "cancelable": true,
        "textFields": [{
        }],
        "customContextDataKey": {
        },
        "id": "A-41a4f31f-c886-4308-a7ff-bae028d5eed8"
      }, {
        "@type": "type.googleapis.com/ShellCommand",
        "command": "goal\u003d{textFieldInput1}\nstepss\u003d`expr $goal - $show_steps`\n\necho $stepss",
        "customContextDataKey": {
        },
        "id": "A-b1b79040-afcf-4fc1-8632-4b9367c8fe2c"
      }, {
        "@type": "type.googleapis.com/WriteGlobalVar",
        "varName": "stepss",
        "valueAsString": "{shellOut}",
        "customContextDataKey": {
        },
        "id": "A-1766a32b-b951-464d-a4ef-7a98b951df69"
      }]
    }, {
      "title": "取消",
      "clickActions": [{
        "@type": "type.googleapis.com/CreateGlobalVar",
        "globalVar": {
          "name": "abbbbbbbbbb",
          "type": {
            "@type": "type.googleapis.com/StringVar"
          }
        },
        "customContextDataKey": {
        },
        "id": "A-21dfd004-9ed3-4982-b9d1-62be01c034e8"
      }]
    }],
    "title": "今日步数：{shellOut}",
    "customContextDataKey": {
    },
    "id": "A-e452fab9-9046-4a83-b381-e8150a5d7f19"
  }, {
    "@type": "type.googleapis.com/Delay",
    "timeString": "10",
    "customContextDataKey": {
    },
    "id": "A-251ba9d6-51d4-49e3-a3a8-66419704bb14"
  }, {
    "@type": "type.googleapis.com/ShellCommand",
    "command": "# 修改自ShortX官方仓库中的MIUI自动步数\n\nstring\u003d$(content query --uri content://com.miui.providers.steps/item --projection _id --sort \"_id DESC\")\narray\u003d($(echo $string | tr \u0027Row: _end_time, _begin_time\u003d\u0027 \u0027 \u0027)) \nid\u003d${array[1]}\ncurrent_time\u003d$(date +%s)\ntail\u003d999\nbegin\u003d$current_time$tail\nend\u003d`expr $begin + 1000`\nsteps\u003d\"globalVarOf$stepss\"\ncontent insert --uri content://com.miui.providers.steps/item --bind _begin_time:s:$begin --bind _id:i:$((id+1)) --bind _end_time:s:$end --bind _mode:i:2 --bind _steps:i:$steps",
    "customContextDataKey": {
    },
    "id": "A-1b8a15b8-ff03-45ce-98a9-5207d17c2b09"
  }, {
    "@type": "type.googleapis.com/DeleteGlobalVar",
    "varName": "stepss",
    "customContextDataKey": {
    },
    "id": "A-daedcb8d-14a7-469d-b6ad-5a2690b0187a"
  }, {
    "@type": "type.googleapis.com/ShowToast",
    "message": "步数修改完毕(\u003d^▽^\u003d)",
    "customContextDataKey": {
    },
    "id": "A-50463815-62e1-484d-8e32-fc7a06556b04"
  }],
  "id": "SHARED-DA-39c10e54-a82c-4da0-bc20-5baa00d24f37",
  "lastUpdateTime": "1729157871346",
  "createTime": "1729134459685",
  "author": {
    "name": "零点"
  },
  "title": "小米步数管理2.1",
  "description": "🏃🏃🏃🏃🏃\n已实现：加减步数、指定步数",
  "versionCode": "1",
  "quit": {
    "facts": [{
      "@type": "type.googleapis.com/GlobalVarChanged",
      "gvId": "abbbbbbbbbb",
      "customContextDataKey": {
      },
      "id": "F-493edcdd-51a0-470e-b44b-c7bb32e637f6"
    }],
    "isEnabled": true,
    "actions": [{
      "@type": "type.googleapis.com/DeleteGlobalVar",
      "varName": "abbbbbbbbbb",
      "customContextDataKey": {
      },
      "id": "A-6ccb6a47-d482-43b1-be79-281b977014af"
    }, {
      "@type": "type.googleapis.com/DeleteGlobalVar",
      "varName": "stepss",
      "customContextDataKey": {
      },
      "id": "A-9148253d-4ee5-4a5b-971e-8ed3ed6af406"
    }]
  }
}
###------###
{"type":"da"}